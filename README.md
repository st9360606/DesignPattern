# DesignPattern ğŸ¨

> Java è¨­è¨ˆåŸå‰‡èˆ‡è¨­è¨ˆæ¨¡å¼æ•™å­¸ç¯„ä¾‹ï¼ˆå¯åŸ·è¡Œã€å¯æ¸¬è©¦ã€å«è¨»è§£ï¼‰ã€‚  
> ç›®å‰å·²åŒ…å« **ç‹€æ…‹æ¨¡å¼ï¼ˆState Patternï¼‰** çš„æŠ½çæ©Ÿå™¨ç¯„ä¾‹ï¼Œå¾ŒçºŒå°‡é€æ­¥æ“´å……å…¶ä»–æ¨¡å¼ã€‚  
> æŠ€è¡“æ£§ï¼š**JDK 17 + Maven**ï¼Œé©åˆåˆå­¸è€…é€æ­¥ç·´ç¿’ä¸¦å»¶ä¼¸åˆ°å¯¦å‹™å°ˆæ¡ˆã€‚

---

## âœ¨ TL;DR

- æ¡ç”¨ **JDK 17 + Maven**ï¼Œæ¯ä¸€ç¨®è¨­è¨ˆæ¨¡å¼ä¸€å€‹å­ packageã€‚  
- æ¯å€‹ç¯„ä¾‹çš†å« `ClientTest`ï¼Œå¯ç›´æ¥åŸ·è¡Œè§€å¯Ÿçµæœã€‚  
- ç¯„ä¾‹è¨­è¨ˆåŸå‰‡ï¼š**å¯è®€æ€§é«˜ã€å¯åŸ·è¡Œã€é¿å…å‰¯ä½œç”¨æ–¹æ³•**ã€‚  
- å·²å®Œæˆï¼š**State Pattern æŠ½çæ©Ÿå™¨** â†’ ç‹€æ…‹æµè½‰ï¼š  
  `NoRaffle â†’ CanRaffle â†’ Dispense â†’ DispenseOut`  
- è¦åŠƒæä¾› **Backlog / é©—æ”¶æº–å‰‡**ï¼Œå”åŠ©å¾ªåºæ“´å……å…¶ä»–æ¨¡å¼ï¼ˆFactoryã€Singletonã€Strategy...ï¼‰ã€‚

---

## ğŸ“‚ å°ˆæ¡ˆçµæ§‹
```plaintext
DesignPattern/
â”œâ”€ pom.xml
â”œâ”€ .gitignore
â”œâ”€ .idea/                  # IntelliJ å°ˆæ¡ˆè¨­å®š
â”œâ”€ .fastRequest/config/    # REST æ’ä»¶è¨­å®šï¼ˆå¯é¸ï¼‰
â””â”€ src/
   â””â”€ main/
      â””â”€ java/
         â””â”€ com/example/pattern/
            â”œâ”€ state/                  # ç‹€æ…‹æ¨¡å¼ï¼ˆæŠ½çæ©Ÿå™¨ç¯„ä¾‹ï¼‰
            â”‚  â”œâ”€ State.java
            â”‚  â”œâ”€ NoRaffleState.java
            â”‚  â”œâ”€ CanRaffleState.java
            â”‚  â”œâ”€ DispenseState.java
            â”‚  â”œâ”€ DispenseOutState.java
            â”‚  â”œâ”€ RaffleActivity.java
            â”‚  â””â”€ ClientTest.java
            â””â”€ (æœªä¾†æ¨¡å¼ä¾‹å¦‚)
               â”œâ”€ singleton/
               â”œâ”€ factory/
               â”œâ”€ strategy/
               â””â”€ observer/

ğŸ› ï¸ é–‹ç™¼ç’°å¢ƒ
JDKï¼š17
å»ºç½®å·¥å…·ï¼šMaven 3.8+
IDEï¼šIntelliJ IDEAï¼ˆå»ºè­°ç¤¾ç¾¤ç‰ˆå³å¯ï¼‰
ç·¨ç¢¼ï¼šUTF-8

ğŸš€ å¿«é€Ÿé–‹å§‹
1ï¸âƒ£ å–å¾—ç¨‹å¼ç¢¼
git clone https://github.com/st9360606/DesignPattern.git
cd DesignPattern

2ï¸âƒ£ ç·¨è­¯ & æ¸¬è©¦
mvn -q -DskipTests=false test

3ï¸âƒ£ åŸ·è¡Œç¯„ä¾‹ï¼ˆä»¥ State Pattern ç‚ºä¾‹ï¼‰
åœ¨ IDE ä¸­åŸ·è¡Œï¼š
com.example.pattern.state.ClientTest

ğŸ¯ ç‹€æ…‹æ¨¡å¼ç¯„ä¾‹ç°¡ä»‹
æ„åœ–ï¼šå°‡ã€ŒæŠ½çæ´»å‹•ã€çš„è¡Œç‚ºä¾ã€Œç‹€æ…‹ã€å°è£åœ¨ç¨ç«‹é¡åˆ¥ï¼Œé¿å…å¤šå±¤ if/elseã€‚

ä¸»è¦è§’è‰²ï¼š
Stateï¼šæŠ½è±¡ç‹€æ…‹ï¼Œå®šç¾© deductMoney()ã€raffle()ã€dispensePrize()ã€‚
RaffleActivityï¼šæ´»å‹•ä¸Šä¸‹æ–‡ï¼ˆContextï¼‰ï¼ŒæŒæœ‰ç•¶å‰ç‹€æ…‹èˆ‡çå“æ•¸é‡ã€‚

å››ç¨®ç‹€æ…‹é¡ï¼š
NoRaffleStateï¼ˆæœªæ‰£åˆ†ï¼Œä¸èƒ½æŠ½ï¼‰
CanRaffleStateï¼ˆå·²æ‰£åˆ†ï¼Œå¯ä»¥æŠ½ï¼‰
DispenseStateï¼ˆä¸­çï¼Œç™¼æ”¾çå“ï¼‰
DispenseOutStateï¼ˆçå“ç™¼å®Œï¼Œæ´»å‹•çµæŸï¼‰


ğŸ“ å¾…è¾¦æ¸…å–® (Backlog)
| ID | User Story                | é©—æ”¶æº–å‰‡                                | ä¼°é»  |
| -- | ------------------        | ----------------------------------     | --- |
| P1 | `getCount()` ç„¡å‰¯ä½œç”¨      | é‡è¤‡å‘¼å«ä¸æ”¹è®Šåº«å­˜                       | 1   |
| P2 | ç™¼çæ™‚æ‰éæ¸›åº«å­˜            | ä¸­çå¾Œæ‰ `count--`                      | 1   |
| P3 | æ­£ç¢ºç‹€æ…‹åˆ‡æ›               | æ‰£å®Œæœ€å¾Œä¸€å€‹çå“å³è½‰ `DispenseOutState`   | 1   |
| P4 | ClientTest é˜²å‘†é€€å‡º        | é€²å…¥ `DispenseOutState` å³ `break`       | 0.5 |
| P5 | æ–°å¢ JUnit5 æ¸¬è©¦           | `count=1/2` æƒ…å¢ƒæ¸¬è©¦ç¶ ç‡ˆ                  | 2   |
| P6 | æ“´å……å…¶ä»–æ¨¡å¼ï¼ˆStrategy ç­‰ï¼‰ | æ–°å¢ `strategy/` package ä¸¦èƒ½åŸ·è¡Œ         | 2   |


âš ï¸ é¢¨éšªæç¤ºèˆ‡æ›¿ä»£æ–¹æ¡ˆ
å‰¯ä½œç”¨é¢¨éšªï¼šé¿å…åœ¨ getCount() å…§ä¿®æ”¹ç‹€æ…‹ï¼Œæ‡‰è®€å¯«åˆ†é›¢ã€‚
æµç¨‹é€€å‡ºï¼šé¿å… System.exit(0)ï¼Œæ‡‰é€éç‹€æ…‹åˆ‡æ›èˆ‡ break æ”¶æ–‚æµç¨‹ã€‚
å¤šåŸ·è¡Œç·’ï¼šè‹¥æœªä¾†æ”¯æ´ä¸¦è¡ŒæŠ½çï¼Œéœ€ç”¨åŒæ­¥æˆ– AtomicInteger ç¢ºä¿å®‰å…¨ã€‚
æ¸¬è©¦è¦†è“‹ï¼šå»ºè­°ç‚º count=0/1/2 å¯«å–®å…ƒæ¸¬è©¦ç¢ºä¿æ­£ç¢ºæ€§ã€‚
